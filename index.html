<!DOCTYPE html>
	<html>
		<head>
			<meta charset="UTF-8">
			<title>Page Title</title>
			<script src="javascripts/main.js"></script>
			<script src="javascripts/Threads.js"></script>
			<script src="javascripts/Cores.js"></script>
			<script src="javascripts/Rank.js"></script>
			<script src="javascripts/Rank_Ldom.js"></script>
			<link rel="stylesheet" href="stylesheets/style.css">
		</head>
		<body>
			<header>
				<p> Pinning-Prozess Simulation</p> 
			</header>
			<main>
				<div id ="selection" class="two-column">
					<form>
					  
					  <img src="images/help.png" alt="help" title="Choose between the Node-Mode and Task-Mode. In the Node-Mode you can visualise the pinning amongst multiple nodes. In Task-Mode the pinning for a single node is visualised by showing each task individually.">
					  <label for="modus"> Modus: </label>
				      <div class="onoffswitch" onclick="switchMode()">
					  	<input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" tabindex="0" onchange="generateNodeLayout()" checked>
					    <label class="onoffswitch-label" for="myonoffswitch">
					      <span class="onoffswitch-inner"></span>
					      <span class="onoffswitch-switch"></span>
					    </label>
					  </div>
					  
					  <br><br><br>
					  
					  <img src="images/help.png" alt="help" title="Choose a supercomputer partition on which you want to simulate the pinning.">
					  <label for="supercomputer">System:</label>
					  <select id="supercomputer" onchange="generateNodeLayout()">
					      <option selected value="JUWELS">JUWELS</option>
					      <option value="JUWELS-GPU">JUWELS-GPU</option>
					      <option value="JURECA">JURECA</option>
					      <option value="JURECA-BOOSTER">JURECA-Booster</option>
					      <option  value="JUSUF">JUSUF</option>
					      <option value="JUSUF-GPU">JUSUF-GPU</option>
					  </select>
					  
					  
					  <br><br><br>
					  
					  <img src="images/help.png" alt="help" title="Select the numbers of nodes on which you want to simulate the pinning. Only available in Node-Mode.">
					  <label for="nodes">Nodes:</label>
					  <input value="1" type="number" min="1" id="nodes" disabled onchange="generateNodeLayout()">
					  
					  <br><br><br>
					  
					  <img src="images/help.png" alt="help" title="Select the numbers of tasks per job.">
					  <label for="task">Task:</label>
					  <input value="1" type="number" min="0" id="task" onchange="generateNodeLayout()">
					
					  <br><br><br>
					  
					  <img src="images/help.png" alt="help" title="Select the numbers of requested CPUs per task.">
					  <label for="cpu_per_task">CPU's per task:</label>
					  <input value="1" type="number" min="0" id="cpu_per_task" onchange="generateNodeLayout()">
					  
					  <br><br><br>
					  
					  <img src="images/help.png" alt="help" title="Choose a option to bind the CPU threads per task. Rank: Each task is pinned to as many threads as it requests, just filling cores consecutively. Spread the threads and tasks to as many cores as possible. This type is not influenced by the second and third part of the distribution option. Threads: Each task is pinned to as many threads as it requests. Which threads each process gets is controlled by the distribution option. Rank_Ldom: Each task is pinned to as many threads as it requests, just filling the nodes rank by rank cycling sockets and cores. This type is not influenced by the second and third level of the distribution option. The threads of a task are always packed to as few cores as possible. This is the same as cpu-bind=threads distribution=block:cyclic:block. Cores: In a first step the requested CPU threads of a task are assigned in exactly the same way as with cpu-bind=threads. But the final affinity mask for the task is the whole core where any thread is located that it is assigned to. This means if a task is assigned to any thread that is part of a core, it will be bound to the whole core. (The ‘whole’ here means to each thread of the core that is allocated to the job)">
					  <label for="cpu_bind">CPU-Bind:</label>
					  <select id="cpu_bind" onclick="switchCPU_Bind()" onchange="generateNodeLayout()">
					      <option selected>threads</option>
					      <option>rank</option>
					      <option>rank_ldom</option>
					      <option>cores</option>
					  </select>
					  
					  <br><br><br>
					  
					  <img src="images/help.png" alt="help" title="If the hint nomultithread is given, the affinity will be set as if there were only one thread per core on the nodes and an error message will be thrown if the total amount of the threads you are trying to use per node is higher than available amount of physical hardware threads.">
					  <label for="hint">Hint:</label>
					  <select id="hint" onchange="generateNodeLayout()">
					      <option selected>-</option>
					      <option>nomultithread</option>
					  </select>
					  
					  
					  <br><br><br>
					  
					  <img src="images/help.png" alt="help" title="Choose a distribution-option. The first part controls the distribution of the task over the nodes. Block: Distribute tasks to a node such that consecutive tasks share a node. Cyclic : Distribute tasks to a node such that consecutive tasks are distributed over consecutive nodes (in a round-robin fashion). The second part controls the distribution of tasks over sockets inside one node. Block: Each socket is first filled with tasks before the next socket will be used. Cyclic: Each task will be assigned to the next socket(s) in a round-robin fashion. Fcyclic: Each thread inside a task will be assigned to the next socket in a round-robin fashion, spreading the task itself as much as possible over all sockets. fcyclic implies cyclic. The third part controls the distribution of tasks over cores inside one node. Block: Each core is first filled with tasks before the next core will be used. Cyclic: Each task will be assigned to the next core(s) in a round-robin fashion. The threads of a task will fill the cores. Fcyclic: Each thread inside a task will be assigned to the next core in a round-robin fashion, spreading the task itself as much as possible over all cores. fcyclic implies cyclic.">
					  <label for="distribution">Distribution:</label><br><br>
					  <select id="distribution_core" onchange="generateNodeLayout()">
					      <option selected>fcyclic</option>
					      <option>block</option>
					      <option>cyclic</option>
					  </select>
					  <select id="distribution_socket" onchange="generateNodeLayout()">
					      <option selected>cyclic</option>
					      <option>block</option>
					      <option>fcyclic</option>
					  </select>
					  <select id="distribution_node" onchange="generateNodeLayout()">
					      <option selected>block</option>
					      <option>cyclic</option>
					  </select>
					  
			
					  <br><br><br>
					  
					  <p> Slurm-Options: </p>
					  <div id='command'></div> <!-- verschiebung loesen-->
					</form>
				</div>
				<div id="output" class="two-column">
				</div>
			</main>
			<footer>
				<a id='affinity'>Affinity</a>
				<a href="https://www.fz-juelich.de/portal/EN/Service/LegalNotice/_node.html">Legal Notice</a>
				<a href="https://www.fz-juelich.de/portal/EN/dataprotection/_node.html">Data protection</a>
			</footer>
		</body>
</html> 
