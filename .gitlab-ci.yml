stages:
  - generate_files
  - compare

generate_files_jusuf:
  id_tokens:
    SITE_ID_TOKEN:
      aud: "https://gitlab.jsc.fz-juelich.de"
  stage: generate_files
  tags:
    - jusuf
    - login
  script:
    - ml JUBE
    - cd verification/
    - jube-autorun -r "-t js gp cb_all cd_all" all_hello_reduced.xml
  artifacts:
    paths: 
      - verification/pin_logs/
    expire_in: "1 hour"

compare_pinning:
  stage: compare
  image: node:latest
  tags: 
    - public-docker
  script: 
    - cd verification
    - node comparison.js pin_logs/
  artifacts:
    paths: 
      - verification/results.json
    expire_in: "1 hour"